<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Corrected Mermaid Playbook Examples</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        
        h1 {
            color: #1a202c;
            border-bottom: 3px solid #3B82F6;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        .info-box {
            background: #e0f2fe;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .test-container {
            background: white;
            margin-bottom: 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            padding: 15px 20px;
        }
        
        .test-header h2 {
            margin: 0;
            font-size: 1.3em;
        }
        
        .test-content {
            padding: 30px;
            background: #fafbfc;
        }
        
        .mermaid-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            min-height: 200px;
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-top: 10px;
            display: inline-block;
        }
        
        .status.success {
            background: #10b981;
            color: white;
        }
        
        .status.error {
            background: #ef4444;
            color: white;
        }
    </style>
</head>
<body>
    <h1>‚úÖ Final Corrected Mermaid Playbook Examples</h1>
    
    <div class="info-box">
        <strong>üìù All Examples from mermaid_playbook_v3.py:</strong>
        <ul>
            <li><strong>Flowchart:</strong> Removed subgraph to ensure compatibility</li>
            <li><strong>QuadrantChart:</strong> Simple labels without parentheses</li>
            <li><strong>Kanban:</strong> Simple format without blank lines or metadata</li>
        </ul>
    </div>
    
    <!-- Test 1: Flowchart (NO SUBGRAPH) -->
    <div class="test-container">
        <div class="test-header">
            <h2>1. Flowchart</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="flowchart">
flowchart TD
    %% This is a complete flowchart with all major features
    %% Based on official Mermaid.js documentation
    
    %% Different node shapes
    Start([Start Process])           %% Stadium shape (rounded edges)
    Input[/Input Data/]              %% Parallelogram for input/output
    Process[Process Data]            %% Rectangle for standard process
    Decision{Valid Data?}            %% Rhombus for decisions
    Database[(Database)]             %% Cylinder for database
    SubProcess[[Subprocess]]         %% Subroutine shape
    Result[/Output Result/]          %% Parallelogram for output
    End([End Process])               %% Stadium shape
    
    %% Connections with different arrow types
    Start --> Input                  %% Standard arrow
    Input --> Process
    Process --> Decision
    Decision -->|Yes| Database       %% Arrow with label
    Decision -->|No| Error[Display Error]  %% Inline node definition
    Database --> SubProcess
    SubProcess --> Result
    Error -.-> Input                %% Dotted arrow (retry path)
    Result ==> End                   %% Thick arrow (important path)
    
    %% Styling with CSS classes
    classDef errorStyle fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px
    classDef successStyle fill:#51cf66,stroke:#37b24d,stroke-width:2px
    class Error errorStyle
    class Result,End successStyle
                </div>
            </div>
            <div class="status" id="status-flowchart">Checking...</div>
        </div>
    </div>
    
    <!-- Test 2: Entity Relationship -->
    <div class="test-container">
        <div class="test-header">
            <h2>2. Entity Relationship Diagram</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="erDiagram">
erDiagram
    %% Complete ER diagram example from official documentation
    %% Shows all relationship types and attribute definitions
    
    %% Entity definitions with attributes
    CUSTOMER {
        int customer_id PK
        string first_name
        string last_name
        string email UK
        date registration_date
        boolean is_active
    }
    
    ORDER {
        int order_id PK
        date order_date
        decimal total_amount
        string status
        int customer_id FK
    }
    
    PRODUCT {
        int product_id PK
        string product_name
        decimal price
        int stock_quantity
        string category
    }
    
    ORDER_ITEM {
        int order_item_id PK
        int order_id FK
        int product_id FK
        int quantity
        decimal unit_price
    }
    
    ADDRESS {
        int address_id PK
        string street
        string city
        string country
        string postal_code
        int customer_id FK
    }
    
    %% Relationships with cardinality
    CUSTOMER ||--o{ ORDER : places
    %% One customer can place zero or many orders
    
    ORDER ||--|{ ORDER_ITEM : contains
    %% One order must contain one or many items
    
    PRODUCT ||--o{ ORDER_ITEM : "is ordered in"
    %% One product can be in zero or many order items
    
    CUSTOMER ||--o{ ADDRESS : has
    %% One customer can have zero or many addresses
                </div>
            </div>
            <div class="status" id="status-erDiagram">Checking...</div>
        </div>
    </div>
    
    <!-- Test 3: User Journey -->
    <div class="test-container">
        <div class="test-header">
            <h2>3. User Journey</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="journey">
journey
    %% User journey with satisfaction scores (0-5)
    %% Based on official Mermaid documentation
    
    title Customer Online Shopping Experience
    
    section Discovery
        Search for product: 5: Customer
        Browse categories: 4: Customer, Marketing
        Read reviews: 4: Customer
        Compare prices: 3: Customer
        Check availability: 4: Customer, Inventory
    
    section Purchase Decision
        Add to cart: 5: Customer
        Apply discount code: 2: Customer
        Calculate shipping: 3: Customer, Logistics
        Review total cost: 3: Customer
    
    section Checkout Process
        Enter shipping info: 3: Customer
        Select payment method: 4: Customer
        Confirm order: 4: Customer, Sales
        Receive confirmation: 5: Customer, System
    
    section Fulfillment
        Order processing: 4: Warehouse
        Shipping notification: 5: Customer, Logistics
        Track package: 4: Customer
        Receive delivery: 5: Customer, Delivery
    
    section Post-Purchase
        Unbox product: 5: Customer
        Product setup: 3: Customer, Support
        Write review: 3: Customer
        Recommend to friends: 4: Customer, Marketing
                </div>
            </div>
            <div class="status" id="status-journey">Checking...</div>
        </div>
    </div>
    
    <!-- Test 4: Gantt Chart -->
    <div class="test-container">
        <div class="test-header">
            <h2>4. Gantt Chart</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="gantt">
gantt
    %% Complete Gantt chart based on official documentation
    %% Shows various task types, dependencies, and formatting
    
    title Software Development Project Timeline
    dateFormat YYYY-MM-DD
    axisFormat %m/%d
    excludes weekends 2024-12-25 2024-01-01
    
    section Planning Phase
    Project kickoff           :done, kick, 2024-01-01, 1d
    Requirements gathering     :active, req, after kick, 10d
    Technical design          :des, after req, 14d
    Design review             :milestone, dr, after des, 0d
    
    section Development Phase
    Setup development env     :done, setup, 2024-01-15, 3d
    Backend API development   :crit, back, after setup, 21d
    Frontend development      :crit, front, after setup, 25d
    Database implementation   :db, after back, 7d
    Integration               :int, after front db, 10d
    
    section Testing Phase
    Unit testing              :unit, after int, 7d
    Integration testing       :test, after unit, 10d
    User acceptance testing   :crit, uat, after test, 14d
    Bug fixes                 :bug, after uat, 7d
    
    section Deployment
    Staging deployment        :stage, after bug, 5d
    Production prep           :prep, after stage, 3d
    Go live                   :milestone, live, after prep, 1d
    Post-launch support       :support, after live, 14d
                </div>
            </div>
            <div class="status" id="status-gantt">Checking...</div>
        </div>
    </div>
    
    <!-- Test 5: QuadrantChart -->
    <div class="test-container">
        <div class="test-header">
            <h2>5. QuadrantChart</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="quadrantChart">
quadrantChart
    %% Quadrant chart based on official documentation
    %% All coordinates must be between 0 and 1
    
    title Risk Assessment Matrix
    x-axis Low Impact --> High Impact
    y-axis Low Probability --> High Probability
    
    quadrant-1 Critical Risks
    quadrant-2 Major Risks
    quadrant-3 Minor Risks
    quadrant-4 Moderate Risks
    
    %% Plot points: [x-coordinate, y-coordinate]
    %% x: 0 (low impact) to 1 (high impact)
    %% y: 0 (low probability) to 1 (high probability)
    
    Data Breach: [0.9, 0.8]
    System Downtime: [0.85, 0.7]
    Key Person Loss: [0.7, 0.6]
    Budget Overrun: [0.75, 0.65]
    Scope Creep: [0.6, 0.7]
    
    Natural Disaster: [0.95, 0.2]
    Technology Obsolescence: [0.8, 0.3]
    Vendor Failure: [0.7, 0.25]
    
    Minor Delays: [0.2, 0.8]
    Documentation Issues: [0.15, 0.7]
    Team Conflicts: [0.25, 0.75]
    
    Hardware Failure: [0.3, 0.3]
    Office Issues: [0.1, 0.2]
    Training Gaps: [0.35, 0.4]
                </div>
            </div>
            <div class="status" id="status-quadrantChart">Checking...</div>
        </div>
    </div>
    
    <!-- Test 6: Timeline -->
    <div class="test-container">
        <div class="test-header">
            <h2>6. Timeline</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="timeline">
timeline
    %% Timeline diagram based on official documentation
    %% Shows chronological events with optional sections
    
    title Company Evolution Timeline
    
    section Foundation Era
        2018 Q1 : Company founded by 3 co-founders
                : Seed funding of $500K secured
        
        2018 Q3 : First prototype developed
                : Alpha testing with 10 users
        
        2018 Q4 : Beta launch
                : 100 early adopters onboarded
    
    section Growth Phase
        2019 Q2 : Series A funding of $5M
                : Team expanded to 25 people
        
        2019 Q4 : Reached 10,000 active users
                : Launched mobile app
        
        2020 Q2 : COVID-19 remote work boom
                : User base grew 300%
        
        2020 Q4 : First profitable quarter
                : International expansion started
    
    section Scale Phase
        2021 Q2 : Series B funding of $25M
                : Opened European office
        
        2021 Q4 : 100,000 users milestone
                : Enterprise plan launched
        
        2022 Q2 : Acquired competitor
                : Integrated AI features
        
        2022 Q4 : Series C funding of $50M
                : Valuation reached $500M
    
    section Maturity
        2023 Q2 : 1 million users
                : IPO preparation began
        
        2023 Q4 : Revenue exceeded $100M
                : Global presence in 50 countries
        
        2024 Q1 : IPO announcement
                : Public trading commenced
        
        2024 Q2 : Market cap reached $2B
                : Strategic acquisitions
                </div>
            </div>
            <div class="status" id="status-timeline">Checking...</div>
        </div>
    </div>
    
    <!-- Test 7: Kanban -->
    <div class="test-container">
        <div class="test-header">
            <h2>7. Kanban</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="kanban">
kanban
    Todo[Backlog]
        research[Research user requirements]
        design[Create UI mockups]
        planning[Sprint planning meeting]
    InProgress[In Progress]
        backend[Implement REST API]
        frontend[Build React components]
    Review[Code Review]
        auth[Authentication module]
    Testing[QA Testing]
        integration[Integration tests]
    Done[Completed]
        setup[Project setup]
        cicd[CI/CD pipeline]
                </div>
            </div>
            <div class="status" id="status-kanban">Checking...</div>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3B82F6',
                primaryTextColor: '#fff',
                primaryBorderColor: '#2563EB',
                lineColor: '#94A3B8',
                secondaryColor: '#60A5FA',
                tertiaryColor: '#DBEAFE'
            },
            securityLevel: 'loose'
        });
        
        // Check each diagram for errors
        setTimeout(() => {
            const diagrams = [
                'flowchart',
                'erDiagram', 
                'journey',
                'gantt',
                'quadrantChart',
                'timeline',
                'kanban'
            ];
            
            let successCount = 0;
            let failCount = 0;
            
            diagrams.forEach(id => {
                const element = document.getElementById(id);
                const statusElement = document.getElementById(`status-${id}`);
                
                if (element) {
                    // Check if diagram rendered (will have SVG content)
                    if (element.querySelector('svg')) {
                        statusElement.textContent = '‚úÖ Rendering successful';
                        statusElement.className = 'status success';
                        successCount++;
                    } else if (element.textContent.includes('Syntax error')) {
                        statusElement.textContent = '‚ùå Syntax error detected';
                        statusElement.className = 'status error';
                        failCount++;
                    } else {
                        statusElement.textContent = '‚ö†Ô∏è Unknown status';
                        statusElement.className = 'status';
                    }
                }
            });
            
            // Show summary
            console.log(`\nTest Summary: ${successCount}/${diagrams.length} successful`);
            if (successCount === diagrams.length) {
                console.log('üéâ All diagrams rendering successfully!');
            }
        }, 2000);
    </script>
</body>
</html>