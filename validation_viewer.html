<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagram Validation Viewer - Mermaid v11</title>
    
    <!-- Import Mermaid v11 -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        
        // Initialize Mermaid with configuration
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#10B981',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#059669',
                lineColor: '#6B7280',
                secondaryColor: '#34D399',
                background: '#FFFFFF',
                mainBkg: '#10B981',
                secondBkg: '#34D399',
                tertiaryColor: '#F3F4F6'
            },
            flowchart: {
                htmlLabels: true,
                curve: 'linear',
                nodeSpacing: 50,
                rankSpacing: 50
            },
            securityLevel: 'loose'
        });
        
        // Make mermaid globally available
        window.mermaid = mermaid;
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1024px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .test-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .card-header h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .card-header .badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 10px;
        }
        
        .card-body {
            padding: 30px;
        }
        
        .diagram-container {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e5e7eb;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .diagram-container svg {
            max-width: 100%;
            height: auto;
        }
        
        .code-section {
            margin-top: 20px;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .code-header h3 {
            color: #374151;
            font-size: 1.1rem;
        }
        
        .copy-btn {
            padding: 6px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: #764ba2;
            transform: translateY(-1px);
        }
        
        .copy-btn.copied {
            background: #10b981;
        }
        
        pre {
            background: #1f2937;
            color: #e5e7eb;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .status-icon {
            width: 24px;
            height: 24px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .info-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .info-box h4 {
            color: #1e40af;
            margin-bottom: 10px;
        }
        
        .info-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-box li {
            padding: 5px 0;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-box li::before {
            content: "â–¸";
            color: #3b82f6;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¨ Diagram Generation Validation</h1>
            <p>WebSocket Microservice v2 - Single Example Test Results</p>
        </div>
        
        <div class="test-grid">
            <!-- SVG Template Test -->
            <div class="test-card">
                <div class="card-header">
                    <h2>SVG Template Example</h2>
                    <div class="badge">pyramid_3_level</div>
                </div>
                <div class="card-body">
                    <div class="status">
                        <div class="status-icon">âœ“</div>
                        <span>Successfully generated SVG template</span>
                    </div>
                    
                    <div class="diagram-container">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 750" width="600" height="450">
                            <!-- 3-Level Pyramid Template -->
                            <rect width="1000" height="750" fill="#ffffff"/>
                            
                            <!-- Level 3 (Bottom) -->
                            <path id="level_3_fill" d="M 256 569 L 744 569 L 676 466 L 324 466 Z" 
                                  fill="#cddffc" stroke="#cddffc" stroke-width="2"/>
                            <text id="level_3_text" x="500" y="538" text-anchor="middle" 
                                  font-family="Inter, sans-serif" font-size="18" font-weight="500" fill="#000000">
                                Operational Tactics
                            </text>
                            
                            <!-- Level 2 (Middle) -->
                            <path id="level_2_fill" d="M 330 459 L 670 459 L 594 344 L 406 344 Z" 
                                  fill="#84b0f9" stroke="#84b0f9" stroke-width="2"/>
                            <text id="level_2_text" x="500" y="425" text-anchor="middle" 
                                  font-family="Inter, sans-serif" font-size="18" font-weight="500" fill="#ffffff">
                                Strategic Objectives
                            </text>
                            
                            <!-- Level 1 (Top) -->
                            <path id="level_1_fill" d="M 410 338 L 590 338 L 500 188 Z" 
                                  fill="#3B82F6" stroke="#3B82F6" stroke-width="2"/>
                            <text id="level_1_text" x="500" y="306" text-anchor="middle" 
                                  font-family="Inter, sans-serif" font-size="18" font-weight="500" fill="#ffffff">
                                Vision & Mission
                            </text>
                        </svg>
                    </div>
                    
                    <div class="info-box">
                        <h4>Test Details</h4>
                        <ul>
                            <li>Method: SVG Template</li>
                            <li>Generation Time: ~1.5 seconds</li>
                            <li>Quality Score: 1.0</li>
                            <li>LLM Used: No (Pure template)</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Mermaid Flowchart Test -->
            <div class="test-card">
                <div class="card-header">
                    <h2>Mermaid Diagram Example</h2>
                    <div class="badge">flowchart</div>
                </div>
                <div class="card-body">
                    <div class="status">
                        <div class="status-icon">âœ“</div>
                        <span>Successfully generated Mermaid code</span>
                    </div>
                    
                    <div class="diagram-container">
                        <div class="mermaid">
flowchart TD
    A[User enters credentials]
    B{System validates}
    C[Create session]
    D[Redirect to dashboard]
    E[Show error]
    F[Increment failed attempts counter]
    G{Failed attempts &lt; 3?}
    H[Lock account for 15 minutes]
    I(((Login Success)))
    J(((Account Locked)))

    A --> B
    B -- "Valid" --> C
    C --> D
    D --> I
    B -- "Invalid" --> E
    E --> F
    F --> G
    G -- "Yes" --> A
    G -- "No" --> H
    H --> J
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-header">
                            <h3>Mermaid Code</h3>
                            <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                        </div>
                        <pre id="mermaid-code">flowchart TD
    A[User enters credentials]
    B{System validates}
    C[Create session]
    D[Redirect to dashboard]
    E[Show error]
    F[Increment failed attempts counter]
    G{Failed attempts < 3?}
    H[Lock account for 15 minutes]
    I(((Login Success)))
    J(((Account Locked)))

    A --> B
    B -- "Valid" --> C
    C --> D
    D --> I
    B -- "Invalid" --> E
    E --> F
    F --> G
    G -- "Yes" --> A
    G -- "No" --> H
    H --> J</pre>
                    </div>
                    
                    <div class="info-box">
                        <h4>Test Details</h4>
                        <ul>
                            <li>Method: Mermaid Generation</li>
                            <li>Generation Time: ~7.4 seconds</li>
                            <li>Quality Score: 0.9</li>
                            <li>LLM Used: Yes (Gemini 2.5 Flash)</li>
                            <li>Rendering: Mermaid v11 (Client-side)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Additional Information -->
        <div class="test-card">
            <div class="card-header">
                <h2>ðŸ“Š Validation Summary</h2>
            </div>
            <div class="card-body">
                <div class="status">
                    <div class="status-icon">âœ“</div>
                    <span><strong>All tests passed successfully!</strong> Both SVG template and Mermaid generation are working correctly.</span>
                </div>
                
                <h3 style="margin-top: 20px; color: #374151;">Next Steps</h3>
                <div style="margin-top: 15px;">
                    <p style="color: #6b7280; line-height: 1.6;">
                        The basic validation shows that both SVG template rendering and Mermaid diagram generation are functioning properly. 
                        The WebSocket connection is stable, and the microservice correctly routes requests to the appropriate generation methods.
                    </p>
                    <p style="color: #6b7280; line-height: 1.6; margin-top: 15px;">
                        You can now proceed with comprehensive testing of all 25 SVG templates and 7 Mermaid diagram types.
                    </p>
                </div>
                
                <div class="info-box" style="margin-top: 20px;">
                    <h4>Available Diagram Types for Comprehensive Testing</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h5 style="color: #3b82f6; margin-bottom: 10px;">SVG Templates (25)</h5>
                            <ul style="font-size: 0.9rem;">
                                <li>Pyramids (3, 4, 5 levels)</li>
                                <li>Cycles (3, 4, 5 steps)</li>
                                <li>Venn Diagrams (2, 3 circles)</li>
                                <li>Matrix (2x2, 3x3, SWOT)</li>
                                <li>Hub & Spoke (4, 6 spokes)</li>
                                <li>Funnels (3, 4, 5 stages)</li>
                                <li>Process Flows (3, 5 steps)</li>
                                <li>And more...</li>
                            </ul>
                        </div>
                        <div>
                            <h5 style="color: #10b981; margin-bottom: 10px;">Mermaid Types (7)</h5>
                            <ul style="font-size: 0.9rem;">
                                <li>Flowcharts</li>
                                <li>Entity Relationship</li>
                                <li>User Journey</li>
                                <li>Gantt Charts</li>
                                <li>Quadrant Charts</li>
                                <li>Timelines</li>
                                <li>Kanban Boards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function copyCode(btn) {
            const code = document.getElementById('mermaid-code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy Code';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>