<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Gantt Generation Error Diagnosis</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        
        h1 {
            color: #1a202c;
            border-bottom: 3px solid #ef4444;
            padding-bottom: 10px;
        }
        
        .diagnosis-box {
            background: #fee2e2;
            border: 2px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .test-container {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .code-box {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
        
        .code-box pre {
            margin: 0;
            font-size: 12px;
        }
        
        .error {
            background: #fee2e2;
            color: #991b1b;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .correct {
            background: #d1fae5;
            color: #065f46;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #e5e7eb;
        }
        
        th {
            background: #f3f4f6;
            font-weight: bold;
        }
        
        .mermaid-test {
            background: #f9fafb;
            padding: 20px;
            border-radius: 6px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>üîç LLM Gantt Generation Error - Root Cause Analysis</h1>
    
    <div class="diagnosis-box">
        <h2>üéØ THE PROBLEM IDENTIFIED!</h2>
        <p><strong>The LLM is confusing task IDs with status tags!</strong></p>
        <p>It's generating lines like: <code class="error">System Design :des, sysdes, after req, 9d</code></p>
        <p>Where it thinks <code>des</code> is a status tag (it's NOT!) and <code>sysdes</code> is the task ID.</p>
    </div>
    
    <div class="test-container">
        <h2>Syntax Pattern Analysis</h2>
        
        <table>
            <tr>
                <th>Line from Playbook</th>
                <th>Interpretation</th>
                <th>Valid?</th>
            </tr>
            <tr>
                <td><code>Technical design :des, after req, 14d</code></td>
                <td>Task ID = <span class="highlight">des</span>, No status tag</td>
                <td class="correct">‚úÖ Valid</td>
            </tr>
            <tr>
                <td><code>Backend development :crit, back, after setup, 21d</code></td>
                <td>Status = <span class="highlight">crit</span>, Task ID = <span class="highlight">back</span></td>
                <td class="correct">‚úÖ Valid</td>
            </tr>
            <tr style="background: #fee2e2">
                <td><code>System Design :des, sysdes, after req, 9d</code></td>
                <td>Status = <span class="error">des</span> (INVALID!), Task ID = <span class="highlight">sysdes</span></td>
                <td class="error">‚ùå Invalid</td>
            </tr>
            <tr style="background: #fee2e2">
                <td><code>Database Implementation :db, db_imp, after back, 4d</code></td>
                <td>Status = <span class="error">db</span> (INVALID!), Task ID = <span class="highlight">db_imp</span></td>
                <td class="error">‚ùå Invalid</td>
            </tr>
        </table>
    </div>
    
    <div class="test-container">
        <h2>The Pattern Confusion</h2>
        
        <div class="code-comparison">
            <div>
                <h3>‚úÖ Playbook (Correct)</h3>
                <div class="code-box">
                    <pre>section Development
Technical design     :des, after req, 14d
Database impl        :db, after back, 7d
Integration          :int, after front db, 10d
Unit testing         :unit, after int, 7d</pre>
                </div>
                <p>Here: <code>des</code>, <code>db</code>, <code>int</code>, <code>unit</code> are <strong>TASK IDs</strong></p>
            </div>
            
            <div>
                <h3>‚ùå LLM Generated (Wrong)</h3>
                <div class="code-box">
                    <pre>section Development  
System Design        :des, sysdes, after req, 9d
Database Impl        :db, db_imp, after back, 4d
Unit Testing         :test, unit_test, after int, 3d
Integration Testing  :test, int_test, after unit_test, 2d</pre>
                </div>
                <p>LLM thinks: <code>des</code>, <code>db</code>, <code>test</code> are <strong>STATUS TAGS</strong> (they're NOT!)</p>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Live Test - LLM's Wrong Syntax</h2>
        
        <div class="mermaid-test">
            <h3>This is what the LLM generated (should fail):</h3>
            <div class="mermaid">
gantt
    title LLM Generated (Wrong Syntax)
    dateFormat YYYY-MM-DD
    
    section Development
    System Design        :des, sysdes, after req, 9d
    Database Impl        :db, db_imp, after back, 4d
    Integration          :int, after front db_imp, 3d
            </div>
        </div>
        
        <div class="mermaid-test">
            <h3>What it SHOULD generate:</h3>
            <div class="mermaid">
gantt
    title Correct Syntax
    dateFormat YYYY-MM-DD
    
    section Planning
    Requirements         :req, 2024-01-01, 5d
    
    section Development
    System Design        :sysdes, after req, 9d
    Backend              :back, after sysdes, 10d
    Frontend             :front, after sysdes, 10d
    Database Impl        :db_imp, after back, 4d
    Integration          :int, after front db_imp, 3d
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Why This Happens</h2>
        
        <div class="diagnosis-box">
            <h3>The LLM is pattern matching incorrectly:</h3>
            <ol>
                <li>It sees <code>:crit, back,</code> and correctly identifies <code>crit</code> as a status tag</li>
                <li>It sees <code>:des,</code> and incorrectly thinks <code>des</code> is also a status tag</li>
                <li>So it "creates" a new task ID like <code>sysdes</code> thinking it needs both</li>
                <li>This creates invalid syntax: <code>:des, sysdes,</code> where <code>des</code> is NOT a valid status tag!</li>
            </ol>
            
            <h3>Valid Status Tags (ONLY these):</h3>
            <ul>
                <li><code>done</code> - Completed tasks</li>
                <li><code>active</code> - Currently in progress</li>
                <li><code>crit</code> - Critical path</li>
                <li><code>milestone</code> - Zero-duration milestones</li>
            </ul>
            
            <p><strong>Everything else after the colon is a TASK ID, not a status tag!</strong></p>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            gantt: {
                useMaxWidth: true
            }
        });
    </script>
</body>
</html>