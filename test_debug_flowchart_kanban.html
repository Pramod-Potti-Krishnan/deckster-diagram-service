<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Flowchart and Kanban</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        
        h1 {
            color: #1a202c;
            border-bottom: 3px solid #3B82F6;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        .test-container {
            background: white;
            margin-bottom: 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            padding: 15px 20px;
        }
        
        .test-header h2 {
            margin: 0;
            font-size: 1.3em;
        }
        
        .test-content {
            padding: 30px;
            background: #fafbfc;
        }
        
        .mermaid-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            min-height: 200px;
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-top: 10px;
            display: inline-block;
        }
        
        .status.success {
            background: #10b981;
            color: white;
        }
        
        .status.error {
            background: #ef4444;
            color: white;
        }
    </style>
</head>
<body>
    <h1>üîç Debug Flowchart and Kanban</h1>
    
    <!-- Test 1: Simple Flowchart -->
    <div class="test-container">
        <div class="test-header">
            <h2>1. Simple Flowchart (No Subgraph)</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="flowchart-simple">
flowchart TD
    Start([Start Process])
    Input[/Input Data/]
    Process[Process Data]
    Decision{Valid Data?}
    Database[(Database)]
    End([End Process])
    
    Start --> Input
    Input --> Process
    Process --> Decision
    Decision -->|Yes| Database
    Decision -->|No| Error[Display Error]
    Database --> End
    Error -.-> Input
                </div>
            </div>
            <div class="status" id="status-flowchart-simple">Checking...</div>
        </div>
    </div>
    
    <!-- Test 2: Flowchart with Basic Subgraph -->
    <div class="test-container">
        <div class="test-header">
            <h2>2. Flowchart with Basic Subgraph</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="flowchart-subgraph-basic">
flowchart TD
    Start([Start])
    Process[Process]
    End([End])
    
    subgraph sub1
        A[Node A]
        B[Node B]
        A --> B
    end
    
    Start --> sub1
    sub1 --> Process
    Process --> End
                </div>
            </div>
            <div class="status" id="status-flowchart-subgraph-basic">Checking...</div>
        </div>
    </div>
    
    <!-- Test 3: Flowchart with Named Subgraph (Quotes) -->
    <div class="test-container">
        <div class="test-header">
            <h2>3. Flowchart with Named Subgraph (Quotes)</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="flowchart-subgraph-quotes">
flowchart TD
    Start([Start])
    Process[Process]
    End([End])
    
    subgraph Validation["Data Validation Layer"]
        V1[Format Check]
        V2[Range Check]
        V1 --> V2
    end
    
    Start --> Process
    Process --> Validation
    Validation --> End
                </div>
            </div>
            <div class="status" id="status-flowchart-subgraph-quotes">Checking...</div>
        </div>
    </div>
    
    <!-- Test 4: Simple Kanban -->
    <div class="test-container">
        <div class="test-header">
            <h2>4. Simple Kanban (Minimal)</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="kanban-simple">
kanban
    Todo[Backlog]
        task1[Task 1]
        task2[Task 2]
    InProgress[In Progress]
        task3[Task 3]
    Done[Completed]
        task4[Task 4]
                </div>
            </div>
            <div class="status" id="status-kanban-simple">Checking...</div>
        </div>
    </div>
    
    <!-- Test 5: Kanban with Descriptions -->
    <div class="test-container">
        <div class="test-header">
            <h2>5. Kanban with Text Descriptions</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="kanban-descriptions">
kanban
    Todo[Backlog]
        research[Research user requirements - Alice - High]
        design[Create UI mockups - Bob - Medium]
    
    InProgress[In Progress]
        backend[Implement REST API - David - Critical]
        frontend[Build React components - Eve - High]
    
    Done[Completed]
        setup[Project setup - Team - Critical]
                </div>
            </div>
            <div class="status" id="status-kanban-descriptions">Checking...</div>
        </div>
    </div>
    
    <!-- Test 6: Kanban with All Columns (From Working Example) -->
    <div class="test-container">
        <div class="test-header">
            <h2>6. Kanban - From Previously Working Example</h2>
        </div>
        <div class="test-content">
            <div class="mermaid-diagram">
                <div class="mermaid" id="kanban-working">
kanban
    Todo[Backlog]
        research[Research user requirements]
        design[Create UI mockups]
        planning[Sprint planning meeting]
    InProgress[In Progress]
        backend[Implement REST API]
        frontend[Build React components]
    Review[Code Review]
        auth[Authentication module]
    Testing[QA Testing]
        integration[Integration tests]
    Done[Completed]
        setup[Project setup]
        cicd[CI/CD pipeline]
                </div>
            </div>
            <div class="status" id="status-kanban-working">Checking...</div>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3B82F6',
                primaryTextColor: '#fff',
                primaryBorderColor: '#2563EB',
                lineColor: '#94A3B8',
                secondaryColor: '#60A5FA',
                tertiaryColor: '#DBEAFE'
            },
            securityLevel: 'loose'
        });
        
        // Check each diagram for errors
        setTimeout(() => {
            const diagrams = [
                'flowchart-simple',
                'flowchart-subgraph-basic',
                'flowchart-subgraph-quotes',
                'kanban-simple',
                'kanban-descriptions',
                'kanban-working'
            ];
            
            diagrams.forEach(id => {
                const element = document.getElementById(id);
                const statusElement = document.getElementById(`status-${id}`);
                
                if (element) {
                    // Check if diagram rendered (will have SVG content)
                    if (element.querySelector('svg')) {
                        statusElement.textContent = '‚úÖ Rendering successful';
                        statusElement.className = 'status success';
                    } else if (element.textContent.includes('Syntax error')) {
                        statusElement.textContent = '‚ùå Syntax error detected';
                        statusElement.className = 'status error';
                        console.error(`Error in ${id}:`, element.textContent);
                    } else {
                        statusElement.textContent = '‚ö†Ô∏è Unknown status';
                        statusElement.className = 'status';
                    }
                }
            });
        }, 2000);
    </script>
</body>
</html>