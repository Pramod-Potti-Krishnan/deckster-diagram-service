<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid LLM Test Results - Complete Report</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: #718096;
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            color: #718096;
            margin-top: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .test-results {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .test-case {
            background: #f7fafc;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .test-title {
            font-size: 1.5em;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .test-description {
            color: #718096;
            margin-bottom: 15px;
        }
        
        .test-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            display: inline-block;
        }
        
        .badge-success {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .badge-error {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .badge-llm {
            background: #e9d8fd;
            color: #44337a;
        }
        
        .badge-template {
            background: #bee3f8;
            color: #2c5282;
        }
        
        .badge-mermaid {
            background: #fbb6ce;
            color: #702459;
        }
        
        .badge-valid {
            background: #9ae6b4;
            color: #22543d;
        }
        
        .badge-invalid {
            background: #fc8181;
            color: #742a2a;
        }
        
        .svg-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e2e8f0;
            max-height: 500px;
            overflow: auto;
            text-align: center;
        }
        
        .svg-container svg {
            max-width: 100%;
            height: auto;
        }
        
        .mermaid-code {
            background: #2d3748;
            color: #48bb78;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .no-svg {
            color: #718096;
            text-align: center;
            padding: 40px;
            font-style: italic;
        }
        
        .performance-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 1s ease;
        }
        
        .error-message {
            background: #fff5f5;
            border: 1px solid #feb2b2;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .timeline {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }
        
        .timeline-item {
            text-align: center;
            flex: 1;
        }
        
        .timeline-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #4a5568;
        }
        
        .timeline-label {
            color: #718096;
            font-size: 0.85em;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .test-case {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #718096;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 Mermaid LLM Generation Test Results</h1>
            <div class="subtitle">Railway Service - Complete Test Report</div>
            <div class="subtitle" style="font-size: 0.9em; color: #a0aec0;">Generated: <span id="timestamp"></span></div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">10/10</div>
                <div class="stat-label">Tests Passed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">100%</div>
                <div class="stat-label">Success Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">8/10</div>
                <div class="stat-label">Valid SVGs</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">4.53s</div>
                <div class="stat-label">Avg Response</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">LLM Used</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">10</div>
                <div class="stat-label">Mermaid Used</div>
            </div>
        </div>
        
        <div class="test-results">
            <h2 style="color: #2d3748; margin-bottom: 30px;">📊 Individual Test Results</h2>
            
            <!-- Test results will be inserted here dynamically -->
            <div id="test-cases">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading test results...</p>
                </div>
            </div>
        </div>
        
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-value">6</div>
                <div class="timeline-label">LLM-Optimized Tests</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-value">4</div>
                <div class="timeline-label">Standard Tests</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-value">45.3s</div>
                <div class="timeline-label">Total Test Time</div>
            </div>
        </div>
    </div>
    
    <script>
        // Test data
        const testResults = [
            {
                type: "flowchart",
                title: "Authentication Flow",
                description: "Complex authentication flow with multiple decision points",
                content: "Create a comprehensive user authentication flow that includes: User enters email and password, System validates credentials against database, If credentials are valid, check if 2FA is enabled, If 2FA is enabled, send OTP to user's phone, User enters OTP code, System validates OTP, If OTP is valid or 2FA is not enabled, create session token, Grant access to dashboard, If any validation fails, show appropriate error message and allow retry",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.56,
                expected_llm: true,
                svg_file: "flowchart_001.svg"
            },
            {
                type: "sequence",
                title: "E-commerce Checkout",
                description: "Multi-service e-commerce checkout sequence",
                content: "Show the complete interaction for an e-commerce checkout process: Customer clicks checkout button in shopping cart, Frontend sends cart data to API Gateway, API Gateway validates session token with Auth Service, Auth Service confirms user is authenticated, API Gateway forwards request to Order Service, Order Service calculates total with Tax Service, Order Service reserves inventory with Inventory Service, Order Service processes payment with Payment Gateway, Payment Gateway charges credit card, If payment successful, Order Service confirms order, Order Service sends confirmation email via Email Service, API Gateway returns order confirmation to Frontend, Frontend displays success message to Customer",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.82,
                expected_llm: true,
                svg_file: "sequence_002.svg"
            },
            {
                type: "gantt",
                title: "Project Timeline",
                description: "Detailed project timeline with overlapping phases",
                content: "Create a detailed software development project timeline for Q1-Q2 2024: Requirements gathering: January 1-15 (2 weeks), Technical design and architecture: January 15 - February 1 (2.5 weeks), Backend API development: February 1 - March 15 (6 weeks), Frontend development: February 15 - March 30 (6 weeks, overlaps with backend), Integration testing: March 15 - April 15 (4 weeks), User acceptance testing: April 1 - April 20 (3 weeks, overlaps with integration), Bug fixes and optimization: April 15 - May 1 (2 weeks), Documentation: April 20 - May 10 (3 weeks), Production deployment: May 10 - May 15 (1 week), Post-launch support: May 15 - June 30 (6 weeks)",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 3.97,
                expected_llm: true,
                svg_file: "gantt_003.svg"
            },
            {
                type: "pie_chart",
                title: "Infrastructure Costs",
                description: "Cloud infrastructure cost distribution",
                content: "Show the breakdown of cloud infrastructure costs for our SaaS platform: Compute instances (EC2/VMs): 35% ($3,500/month), Database services (RDS/Cloud SQL): 25% ($2,500/month), Storage (S3/Cloud Storage): 15% ($1,500/month), CDN and networking: 10% ($1,000/month), Monitoring and logging: 8% ($800/month), Backup and disaster recovery: 5% ($500/month), Miscellaneous services: 2% ($200/month)",
                success: true,
                generation_method: "mermaid",
                svg_valid: false,
                response_time: 5.01,
                expected_llm: true,
                svg_file: "pie_chart_004.svg"
            },
            {
                type: "mind_map",
                title: "ML Project Planning",
                description: "Comprehensive ML project mind map",
                content: "Create a comprehensive mind map for a Machine Learning project: Central topic: ML Project Planning, Main branches: Data Preparation: Data collection, Data cleaning, Feature engineering, Data augmentation, Model Selection: Supervised learning (Classification, Regression), Unsupervised learning (Clustering, Dimensionality reduction), Deep learning (CNN, RNN, Transformer), Training Strategy: Train-test split, Cross-validation, Hyperparameter tuning, Early stopping, Evaluation Metrics: Accuracy, Precision/Recall, F1 Score, ROC-AUC, Confusion matrix, Deployment: Model serving, API development, Containerization, Monitoring, A/B testing, Tools & Frameworks: Python libraries (TensorFlow, PyTorch, Scikit-learn), Cloud platforms (AWS SageMaker, Google AI Platform), Version control (Git, DVC)",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.23,
                expected_llm: true,
                svg_file: "mind_map_005.svg"
            },
            {
                type: "state_diagram",
                title: "Order Processing",
                description: "Complex order processing state machine",
                content: "Design a state machine for an order processing system: Start at 'New Order' state, From 'New Order' can transition to 'Payment Processing' when payment is initiated, From 'Payment Processing' can go to either 'Payment Failed' (retry payment) or 'Payment Confirmed', 'Payment Failed' can return to 'Payment Processing' on retry or go to 'Order Cancelled' after max retries, From 'Payment Confirmed' transition to 'Preparing Order', From 'Preparing Order' go to 'Ready for Shipping', From 'Ready for Shipping' go to 'Shipped' when courier picks up, From 'Shipped' go to 'In Transit' with tracking updates, From 'In Transit' go to either 'Delivered' (success) or 'Delivery Failed' (retry), 'Delivery Failed' can go back to 'In Transit' for retry or 'Returned to Sender', Both 'Delivered' and 'Order Cancelled' and 'Returned to Sender' are final states",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.78,
                expected_llm: true,
                svg_file: "state_diagram_006.svg"
            },
            {
                type: "journey_map",
                title: "Customer Journey",
                description: "Simple customer journey",
                content: "Discovery -> Research -> Evaluation -> Purchase -> Onboarding -> Advocacy",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 3.91,
                expected_llm: false,
                svg_file: "journey_map_007.svg"
            },
            {
                type: "architecture",
                title: "System Architecture",
                description: "Basic architecture diagram",
                content: "Frontend -> API Gateway -> Services -> Database",
                success: true,
                generation_method: "mermaid",
                svg_valid: false,
                response_time: 5.12,
                expected_llm: false,
                svg_file: "architecture_008.svg"
            },
            {
                type: "network",
                title: "Network Topology",
                description: "Simple network topology",
                content: "Internet -> Firewall -> Router -> Servers",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.45,
                expected_llm: false,
                svg_file: "network_009.svg"
            },
            {
                type: "concept_map",
                title: "Concept Relationships",
                description: "Basic concept relationships",
                content: "Main Concept -> Sub Concept 1 -> Details, Main Concept -> Sub Concept 2 -> More Details",
                success: true,
                generation_method: "mermaid",
                svg_valid: true,
                response_time: 4.67,
                expected_llm: false,
                svg_file: "concept_map_010.svg"
            }
        ];
        
        // Function to render test cases
        function renderTestCases() {
            const container = document.getElementById('test-cases');
            container.innerHTML = '';
            
            testResults.forEach((test, index) => {
                const testCase = document.createElement('div');
                testCase.className = 'test-case';
                
                // Determine generation method color
                let methodBadge = '';
                if (test.generation_method === 'mermaid') {
                    methodBadge = '<span class="badge badge-mermaid">Mermaid</span>';
                } else if (test.generation_method.includes('llm')) {
                    methodBadge = '<span class="badge badge-llm">LLM</span>';
                } else {
                    methodBadge = '<span class="badge badge-template">Template</span>';
                }
                
                testCase.innerHTML = `
                    <div class="test-header">
                        <div>
                            <div class="test-title">${index + 1}. ${test.title} (${test.type})</div>
                            <div class="test-description">${test.description}</div>
                        </div>
                    </div>
                    
                    <div class="test-meta">
                        ${test.success ? '<span class="badge badge-success">✅ Success</span>' : '<span class="badge badge-error">❌ Failed</span>'}
                        ${methodBadge}
                        ${test.svg_valid ? '<span class="badge badge-valid">Valid SVG</span>' : '<span class="badge badge-invalid">Invalid SVG</span>'}
                        <span class="badge" style="background: #f7fafc; color: #4a5568;">⏱️ ${test.response_time.toFixed(2)}s</span>
                        ${test.expected_llm ? '<span class="badge" style="background: #fef5e7; color: #935116;">Expected: LLM</span>' : '<span class="badge" style="background: #e8f8f5; color: #148f77;">Expected: Template</span>'}
                    </div>
                    
                    <details>
                        <summary style="cursor: pointer; color: #667eea; font-weight: bold; margin-top: 15px;">View Request Content</summary>
                        <div style="background: #f7fafc; padding: 15px; border-radius: 8px; margin-top: 10px; font-size: 0.9em; color: #4a5568;">
                            ${test.content}
                        </div>
                    </details>
                    
                    <div class="performance-bar">
                        <div class="performance-fill" style="width: ${(test.response_time / 6) * 100}%"></div>
                    </div>
                    
                    ${test.success ? `
                        <div class="svg-container">
                            <p style="color: #718096; margin-bottom: 10px;">📊 Generated Diagram (${test.svg_file})</p>
                            <div style="background: #f7fafc; padding: 20px; border-radius: 10px;">
                                <p style="color: #a0aec0; font-style: italic;">SVG diagram would be displayed here</p>
                                <p style="color: #cbd5e0; font-size: 0.85em; margin-top: 10px;">
                                    ${test.svg_valid ? '✅ Fully rendered SVG with graphical elements' : '⚠️ SVG generated but validation detected issues'}
                                </p>
                            </div>
                        </div>
                    ` : `
                        <div class="error-message">
                            Error: Failed to generate diagram
                        </div>
                    `}
                `;
                
                container.appendChild(testCase);
            });
        }
        
        // Set timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
        
        // Render after a short delay to show loading animation
        setTimeout(renderTestCases, 1000);
    </script>
</body>
</html>